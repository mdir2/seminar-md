# Null 서바이벌 by 박상철
## Question
### 코드에 책임을 지나요?
> 전문가의 마인드로 코드를 대하나요?
## Section
* null과 null안전성
* null에 안전한 코딩법
* null에 안전하다고 점검해주는 도구

<br>

# null과 null 안전성
## 자바에서 null이 문제인 이유
* 모호함
```
초기화되지 않음, 정의되지 않음, 값이 없음, 오류, null 값?
```

* 모든 참조의 기본 상태 또는 값


## Null Safe 지원
### Null 병합 연산자
* 첫 인자가 null이면 null 반환 아니면 두번쨰 인자 값은 반환
* 통칭 엘비스 연산자
```code
a ?: b      // 그루비
a ?? bb     // 
a or b      // 파이썬
a // b      // perl
```

### Null 조건 연산자
* 첫 인자가 null이면 null 반환 아니면 두번쨰 인자 실행

### Type System 강화
* Null 가능 타입
    * 선택적 타입 속성으로 취급함
    * 기본적으로 모든 타입은 null 불가능

* Null 타입과 타입의 결합
    * null은 Null타입의 값
    * null을 타입으로써 취급 함.
    * 특정 타입과 Null타입을 결합하여 Null 가능하도록 선언 가능
    * 실론, 스칼라 3(예정)

* Optional 사용
    * 기본적으로 모든 타입이 Null 불가능
    * 값이 없을 수 있음은 Optional이나 Maybe 값은 펑터를 사용해서 표현

<br>

# null에 안전한 코딩법
* 기본적으로 null을 쓰지 말자

* null 문맥을 제한된 범위 안에 가두자
    * 지역적으로 제한할때, null이나 상태에 부작용이 적어진다.
    
* 좋은 캡슐화
    * 높은 응집성 : 한가지 책임만 가짐 'SRP'
        * 모든 필드와 객체가 생명주기가 같다
    * 낮은 결합
        * 디미터 법칙
        * 인터페이스에 의존

* Law of Demeter
    * 내부 기능을 직접 호출하거나 이용해서는 안된다
    * 위임받거나 해야한다.
    <br>
    ex) DDD

* API에 null을 최대한 쓰지 말아라
    * 명시적은 메서드를 만들어라
    * null을 반환하지 말라
        * 빈컬레션이나 Null 객체 활용
        * 반환값이 없을수도 있음을 명시적으로 Optionnal로 표현
        * 오류상황에서는 null을 반환하지말고 예외를 던져라

* null 객체를 활용하자
    * 더미 클래스를 만듬 (아무일도 안함)
    * null 대신에 이걸 반환 함
> 모든 객체에 더미 클래스를 만들어야 한다고? 글쎄...  
> 작은 똥 치우려고 너무 큰 삽을 쓰는거 아니야?

* null을 명시적으로 표현하자
    * Optional을 사용하자
    * 불필요한 언박싱은 피하자
        * 래퍼클래스들은 이미 한번 박싱 되어있는데 옵션널로 박싱해주면 이중 박싱이다...
```
OptionalDouble, OptionalInt 처럼 리터럴 타입에 대해서 따로 옵셔널클래스를 제공해준다.
```

* 계약에 의한 설계를 적용
    * input, output arguments에 대한 검증을 함
    * 펑션 콜 할때마다 매번 검증 함.

* 구조체에는 펑터를 활용하자 (Optional == Functor)
    * map() 이용하여 null 확인해서 원하는 객체를 얻을 수 있음.

* 객체의 기본값을 유용하게 만들자
    * Useful한 초기값을 만들어야함

# null 안전성을 도와주는 자바 도구
* 정적 분석 또는 어노테이션 프로세싱

* 타입시스템 확장

## 정적 분석 또는 어노테이션 프로세싱
### IDE tool에서 제공해주는 어노테이션들
* 인텔리제이 제공

* 이클립스 제공

* 롬복 제공

* 스프링 제공

* Checker Framework

## 타입시스템 확장